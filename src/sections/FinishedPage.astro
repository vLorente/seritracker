---
import EmptyResponse from "@components/EmptyResponse.astro"
import Row from "@components/Row.astro"
import Section from "@components/Section.astro"
import type { AnimeData } from "@interfaces/animeResponse"

interface FinishedInterface {
	userId: number
	malId: number
	malItem: AnimeData
}

interface LoaderData {
	finishedList: FinishedInterface[]
	emptyText: {
		title: string
		text: string
	}
}

const loader = (): LoaderData => {
	const emptyText = {
		title: "Ops!",
		text: "🙁 Aún no tienes series en tu lista de finalizadas",
	}
	// TODO

	const finishedList: FinishedInterface[] = []
	return { finishedList, emptyText } as LoaderData
}

const { finishedList, emptyText } = loader()

const buttonText = "ELIMINAR"
---

<Section title="Viendo">
	{
		finishedList.length > 0 ? (
			finishedList.map(({ malItem }) => (
				<Row
					title={malItem.title}
					text={malItem.synopsis}
					image={malItem.images.webp.image_url}
					buttonText={buttonText}
				/>
			))
		) : (
			<EmptyResponse title={emptyText.title} text={emptyText.text} />
		)
	}
</Section>
