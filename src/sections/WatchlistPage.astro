---
import EmptyResponse from "@components/EmptyResponse.astro"
import Row from "@components/Row.astro"
import Section from "@components/Section.astro"

import type { AnimeData } from "@interfaces/animeResponse"

interface WatchlistInterface {
	userId: number
	malId: number
	malItem: AnimeData
}

interface LoaderData {
	watchlistList: WatchlistInterface[]
	emptyText: {
		title: string
		text: string
	}
}
const loader = (): LoaderData => {
	const emptyText = {
		title: "Ops!",
		text: "🙁 Aún no tienes series en tu lista de pendientes",
	}

	//TODO

	const watchlistList: WatchlistInterface[] = []

	return { watchlistList, emptyText }
}

const { watchlistList, emptyText } = loader()
const buttonText = "VIENDO"
---

<Section title="Pendientes">
	{
		watchlistList.length > 0 ? (
			watchlistList.map(({ malItem }) => (
				<Row
					title={malItem.title}
					text={malItem.synopsis}
					image={malItem.images.webp.image_url}
					buttonText={buttonText}
				/>
			))
		) : (
			<EmptyResponse title={emptyText.title} text={emptyText.text} />
		)
	}
</Section>

<script></script>
